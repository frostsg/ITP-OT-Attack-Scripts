from pymodbus.client import ModbusTcpClient

# Define the IP and port of the Modbus server
ip_address = '192.168.30.3'
port = 502

# Coil addresses to be manipulated
coil_address_3 = 2

# Initialize the Modbus TCP client
client = ModbusTcpClient(ip_address, port)

while True:
    # Connect to the Modbus server
    if client.connect():
        
        # Write value to the first coil (True to turn it on)
        response_1 = client.write_coil(coil_address_3, True)
        if response_1.isError():
            print(f"Error writing to coil at address {coil_address_3}")
        else:
            print(f"Coil value at address {coil_address_3} successfully altered to True")

    else:
        print("Unable to connect to the Modbus server")
